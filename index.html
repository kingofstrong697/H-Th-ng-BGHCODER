<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Python Obfuscator Pro - Bảo vệ mã nguồn Python</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #6366f1;
            --primary-dark: #4f46e5;
            --secondary-color: #10b981;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --dark-color: #1f2937;
            --light-color: #f9fafb;
            --gray-color: #6b7280;
            --shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.15);
            --border-radius: 12px;
            --border-radius-sm: 8px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            border-radius: var(--border-radius);
            background-color: white;
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo i {
            color: var(--primary-color);
            font-size: 2.5rem;
        }

        .logo h1 {
            font-size: 2.2rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        .subtitle {
            color: var(--gray-color);
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .app-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        @media (max-width: 992px) {
            .app-container {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 30px;
            transition: var(--transition);
        }

        .panel:hover {
            box-shadow: var(--shadow-lg);
        }

        .panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--dark-color);
        }

        .panel-title i {
            color: var(--primary-color);
        }

        .file-upload-area {
            border: 3px dashed #d1d5db;
            border-radius: var(--border-radius);
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 25px;
            -webkit-user-select: none;
            user-select: none;
        }

        .file-upload-area:hover, .file-upload-area.dragover {
            border-color: var(--primary-color);
            background-color: rgba(99, 102, 241, 0.05);
        }

        .file-upload-area.ios-active {
            border-color: var(--primary-color);
            background-color: rgba(99, 102, 241, 0.1);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        .file-upload-text {
            margin-bottom: 10px;
            font-weight: 500;
        }

        .file-upload-subtext {
            color: var(--gray-color);
            font-size: 0.9rem;
            margin-bottom: 20px;
        }

        .file-input {
            display: none;
        }

        .file-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
            -webkit-appearance: none;
            appearance: none;
            font-size: 1rem;
        }

        .file-button:active {
            background-color: var(--primary-dark);
            transform: scale(0.98);
        }

        .selected-file {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #f3f4f6;
            padding: 15px;
            border-radius: var(--border-radius-sm);
            margin-top: 20px;
            display: none;
        }

        .file-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .file-icon {
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        .remove-file {
            color: var(--danger-color);
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
            -webkit-appearance: none;
            appearance: none;
        }

        .levels-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        @media (max-width: 768px) {
            .levels-container {
                grid-template-columns: 1fr;
            }
        }

        .level-card {
            border: 2px solid #e5e7eb;
            border-radius: var(--border-radius);
            padding: 20px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
            -webkit-user-select: none;
            user-select: none;
        }

        .level-card:active {
            transform: scale(0.98);
        }

        .level-card.selected {
            border-color: var(--primary-color);
            background-color: rgba(99, 102, 241, 0.05);
        }

        .level-card.ios-touch {
            background-color: rgba(99, 102, 241, 0.1);
        }

        .level-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            color: white;
        }

        .level-badge.low {
            background-color: var(--secondary-color);
        }

        .level-badge.medium {
            background-color: var(--warning-color);
        }

        .level-badge.high {
            background-color: var(--danger-color);
        }

        .level-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .level-icon.low {
            color: var(--secondary-color);
        }

        .level-icon.medium {
            color: var(--warning-color);
        }

        .level-icon.high {
            color: var(--danger-color);
        }

        .level-title {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .level-desc {
            font-size: 0.85rem;
            color: var(--gray-color);
            margin-bottom: 10px;
        }

        .level-features {
            list-style: none;
            font-size: 0.8rem;
            color: var(--gray-color);
        }

        .level-features li {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .level-features li i {
            font-size: 0.7rem;
            color: var(--secondary-color);
        }

        .obfuscate-button {
            width: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            padding: 16px;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            -webkit-appearance: none;
            appearance: none;
        }

        .obfuscate-button:active {
            transform: scale(0.98);
        }

        .obfuscate-button:disabled {
            background: #9ca3af;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .output-panel {
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .output-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .output-actions {
            display: flex;
            gap: 10px;
        }

        .action-button {
            padding: 8px 16px;
            border-radius: var(--border-radius-sm);
            border: none;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
            -webkit-appearance: none;
            appearance: none;
            font-size: 0.9rem;
        }

        .action-button:active {
            transform: scale(0.95);
        }

        .download-button {
            background-color: var(--secondary-color);
            color: white;
        }

        .download-button:hover {
            background-color: #0da271;
        }

        .copy-button {
            background-color: #e5e7eb;
            color: var(--dark-color);
        }

        .copy-button:hover {
            background-color: #d1d5db;
        }

        .clear-button {
            background-color: #f3f4f6;
            color: var(--danger-color);
        }

        .clear-button:hover {
            background-color: #fee2e2;
        }

        .output-content {
            flex-grow: 1;
            background-color: #1e1e1e;
            border-radius: var(--border-radius-sm);
            padding: 20px;
            overflow: auto;
            font-family: 'Roboto Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            color: #d4d4d4;
            margin-bottom: 20px;
            min-height: 300px;
            -webkit-overflow-scrolling: touch;
        }

        .output-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #6b7280;
            text-align: center;
        }

        .output-placeholder i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #4b5563;
        }

        .processing-indicator {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(99, 102, 241, 0.2);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .features-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        @media (max-width: 992px) {
            .features-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 576px) {
            .features-section {
                grid-template-columns: 1fr;
            }
        }

        .feature-card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-align: center;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 1.5rem;
            color: white;
        }

        .feature-icon.security {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
        }

        .feature-icon.performance {
            background: linear-gradient(135deg, #10b981, #0ea5e9);
        }

        .feature-icon.compatibility {
            background: linear-gradient(135deg, #8b5cf6, #6366f1);
        }

        .feature-icon.support {
            background: linear-gradient(135deg, #ec4899, #f97316);
        }

        .feature-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feature-desc {
            font-size: 0.9rem;
            color: var(--gray-color);
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--gray-color);
            font-size: 0.9rem;
            border-top: 1px solid #e5e7eb;
            margin-top: 40px;
        }

        .alert {
            padding: 15px;
            border-radius: var(--border-radius-sm);
            margin-bottom: 20px;
            display: none;
            align-items: center;
            gap: 10px;
        }

        .alert.success {
            background-color: #d1fae5;
            color: #065f46;
            border-left: 4px solid var(--secondary-color);
        }

        .alert.error {
            background-color: #fee2e2;
            color: #991b1b;
            border-left: 4px solid var(--danger-color);
        }

        .alert.info {
            background-color: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--primary-color);
        }

        .alert i {
            font-size: 1.2rem;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 10px;
            display: none;
        }

        .progress {
            height: 100%;
            background: linear-gradient(to right, var(--secondary-color), var(--primary-color));
            width: 0%;
            transition: width 0.5s ease;
        }

        /* iOS-specific fixes */
        @supports (-webkit-touch-callout: none) {
            .file-button, .action-button, .obfuscate-button, .level-card {
                cursor: pointer;
            }
            
            input, button, select, textarea {
                font-size: 16px !important; /* Ngăn zoom iOS */
            }
            
            .file-upload-area {
                min-height: 150px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
        }

        /* Fix cho Safari iOS */
        @media (max-width: 768px) {
            .panel {
                padding: 20px;
            }
            
            .level-card {
                padding: 15px;
            }
            
            .obfuscate-button {
                padding: 14px;
            }
        }

        /* Hiệu ứng touch cho iOS */
        .touch-active {
            opacity: 0.8;
            transform: scale(0.98);
        }

        /* Fix cho input file trên iOS */
        .ios-file-input-wrapper {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .ios-file-input-wrapper input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 10;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-lock"></i>
                <h1>Python Obfuscator Pro</h1>
            </div>
            <p class="subtitle">Bảo vệ mã nguồn Python của bạn với 3 cấp độ obfuscation mạnh mẽ, chống dịch ngược, chống debug và chống crack. File sau obfuscation vẫn chạy bình thường.</p>
        </header>

        <div class="alert info" id="infoAlert">
            <i class="fas fa-info-circle"></i>
            <span id="infoMessage">Chỉ chấp nhận file .py. Kích thước tối đa: 2MB. Obfuscation được thực hiện trực tiếp trên trình duyệt.</span>
        </div>

        <div class="app-container">
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-file-upload"></i>
                    <span>Chọn File Python</span>
                </div>
                
                <div class="file-upload-area" id="dropArea">
                    <div class="file-upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="file-upload-text">Chọn file Python bằng nút bên dưới</div>
                    <div class="file-upload-subtext" id="iosMessage">Trên iOS: Nhấn giữ để chọn file</div>
                    <div class="ios-file-input-wrapper">
                        <button class="file-button" id="browseButton">
                            <i class="fas fa-folder-open"></i>
                            Chọn File
                        </button>
                        <input type="file" id="fileInput" class="file-input" accept=".py" capture="environment">
                    </div>
                </div>
                
                <div class="selected-file" id="selectedFile">
                    <div class="file-info">
                        <i class="fas fa-file-code file-icon"></i>
                        <div>
                            <div id="fileName">example.py</div>
                            <div id="fileSize">2.5 KB</div>
                        </div>
                    </div>
                    <button class="remove-file" id="removeFile">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="panel-title" style="margin-top: 30px;">
                    <i class="fas fa-shield-alt"></i>
                    <span>Cấp Độ Obfuscation</span>
                </div>
                
                <div class="levels-container">
                    <div class="level-card" data-level="low" id="levelLow">
                        <div class="level-badge low">MỨC 1</div>
                        <div class="level-icon low">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="level-title">Cơ Bản</div>
                        <div class="level-desc">Obfuscation nhẹ, phù hợp cho mã nguồn cần bảo vệ cơ bản</div>
                        <ul class="level-features">
                            <li><i class="fas fa-check"></i> Đổi tên biến/hàm</li>
                            <li><i class="fas fa-check"></i> Mã hóa chuỗi cơ bản</li>
                            <li><i class="fas fa-check"></i> Chống dịch ngược đơn giản</li>
                        </ul>
                    </div>
                    
                    <div class="level-card" data-level="medium" id="levelMedium">
                        <div class="level-badge medium">MỨC 2</div>
                        <div class="level-icon medium">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="level-title">Nâng Cao</div>
                        <div class="level-desc">Obfuscation mạnh, chống debug và phân tích tĩnh</div>
                        <ul class="level-features">
                            <li><i class="fas fa-check"></i> Tất cả tính năng cấp 1</li>
                            <li><i class="fas fa-check"></i> Thêm code giả nhiễu</li>
                            <li><i class="fas fa-check"></i> Chống debug & phân tích</li>
                        </ul>
                    </div>
                    
                    <div class="level-card selected" data-level="high" id="levelHigh">
                        <div class="level-badge high">MỨC 3</div>
                        <div class="level-icon high">
                            <i class="fas fa-lock"></i>
                        </div>
                        <div class="level-title">Chuyên Nghiệp</div>
                        <div class="level-desc">Obfuscation mạnh nhất, chống mọi công cụ dịch ngược</div>
                        <ul class="level-features">
                            <li><i class="fas fa-check"></i> Tất cả tính năng cấp 2</li>
                            <li><i class="fas fa-check"></i> Mã hóa control flow</li>
                            <li><i class="fas fa-check"></i> Chống crack & phân tích động</li>
                        </ul>
                    </div>
                </div>
                
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
                
                <button class="obfuscate-button" id="obfuscateButton" disabled>
                    <i class="fas fa-cogs"></i>
                    Bắt Đầu Obfuscation
                </button>
            </div>
            
            <div class="panel output-panel">
                <div class="output-header">
                    <div class="panel-title">
                        <i class="fas fa-code"></i>
                        <span>Kết Quả Obfuscation</span>
                    </div>
                    <div class="output-actions">
                        <button class="action-button download-button" id="downloadButton" disabled>
                            <i class="fas fa-download"></i>
                            Tải Xuống
                        </button>
                        <button class="action-button copy-button" id="copyButton" disabled>
                            <i class="far fa-copy"></i>
                            Sao Chép
                        </button>
                        <button class="action-button clear-button" id="clearButton">
                            <i class="fas fa-trash-alt"></i>
                            Xóa
                        </button>
                    </div>
                </div>
                
                <div class="output-content" id="outputContent">
                    <div class="output-placeholder" id="outputPlaceholder">
                        <i class="fas fa-file-code"></i>
                        <div>Kết quả obfuscation sẽ hiển thị ở đây</div>
                        <div style="font-size: 0.8rem; margin-top: 10px;">File sau khi obfuscation vẫn giữ nguyên chức năng nhưng được bảo vệ chống dịch ngược</div>
                    </div>
                    
                    <div class="processing-indicator" id="processingIndicator">
                        <div class="spinner"></div>
                        <div>Đang xử lý obfuscation...</div>
                        <div style="font-size: 0.8rem; margin-top: 10px; color: #9ca3af;">Quá trình này có thể mất vài giây tùy vào kích thước file</div>
                    </div>
                    
                    <pre id="obfuscatedCode" style="display: none;"></pre>
                </div>
                
                <div class="alert success" id="successAlert">
                    <i class="fas fa-check-circle"></i>
                    <span>Obfuscation thành công! File đã sẵn sàng để tải xuống.</span>
                </div>
                
                <div class="alert error" id="errorAlert">
                    <i class="fas fa-exclamation-circle"></i>
                    <span id="errorMessage">Đã xảy ra lỗi. Vui lòng thử lại.</span>
                </div>
            </div>
        </div>
        
        <div class="features-section">
            <div class="feature-card">
                <div class="feature-icon security">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="feature-title">Bảo Mật Cao</div>
                <div class="feature-desc">Sử dụng nhiều lớp obfuscation, mã hóa control flow và chống debug hiệu quả.</div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon performance">
                    <i class="fas fa-tachometer-alt"></i>
                </div>
                <div class="feature-title">Hiệu Suất Tốt</div>
                <div class="feature-desc">File sau obfuscation chạy với hiệu suất gần như không thay đổi so với bản gốc.</div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon compatibility">
                    <i class="fas fa-check-circle"></i>
                </div>
                <div class="feature-title">Tương Thích Hoàn Toàn</div>
                <div class="feature-desc">Hỗ trợ Python 3.6+, tất cả các thư viện chuẩn và nhiều thư viện bên thứ ba.</div>
            </div>
            
            <div class="feature-card">
                <div class="feature-icon support">
                    <i class="fas fa-headset"></i>
                </div>
                <div class="feature-title">Hỗ Trợ Mạnh Mẽ</div>
                <div class="feature-desc">Được kiểm tra kỹ lưỡng, fix bug đến khi hoàn hảo, đảm bảo hoạt động 100%.</div>
            </div>
        </div>
        
        <footer>
            <p>Python Obfuscator Pro &copy; 2023 - Công cụ bảo vệ mã nguồn Python mạnh mẽ nhất</p>
            <p style="font-size: 0.8rem; margin-top: 5px;">Được phát triển với các kỹ thuật obfuscation tiên tiến, đảm bảo hiệu quả 100%</p>
        </footer>
    </div>

    <script>
        // Phát hiện iOS
        const isIOS = () => {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        };
        
        // Phát hiện Safari
        const isSafari = () => {
            return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        };
        
        // Biến toàn cục
        let selectedFile = null;
        let selectedLevel = 'high';
        let obfuscatedCode = '';
        let isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const browseButton = document.getElementById('browseButton');
        const dropArea = document.getElementById('dropArea');
        const selectedFileDiv = document.getElementById('selectedFile');
        const fileNameSpan = document.getElementById('fileName');
        const fileSizeSpan = document.getElementById('fileSize');
        const removeFileButton = document.getElementById('removeFile');
        const levelCards = document.querySelectorAll('.level-card');
        const obfuscateButton = document.getElementById('obfuscateButton');
        const outputPlaceholder = document.getElementById('outputPlaceholder');
        const processingIndicator = document.getElementById('processingIndicator');
        const obfuscatedCodePre = document.getElementById('obfuscatedCode');
        const downloadButton = document.getElementById('downloadButton');
        const copyButton = document.getElementById('copyButton');
        const clearButton = document.getElementById('clearButton');
        const successAlert = document.getElementById('successAlert');
        const errorAlert = document.getElementById('errorAlert');
        const errorMessageSpan = document.getElementById('errorMessage');
        const progressBar = document.getElementById('progressBar');
        const progress = document.getElementById('progress');
        const infoAlert = document.getElementById('infoAlert');
        const infoMessage = document.getElementById('infoMessage');
        const iosMessage = document.getElementById('iosMessage');
        
        // Khởi tạo cho iOS
        if (isIOS()) {
            // Thay đổi thông báo cho iOS
            iosMessage.textContent = "Nhấn vào nút 'Chọn File' để chọn file từ iCloud, Files, hoặc máy của bạn";
            infoMessage.textContent = "Trên iOS: Chọn file .py từ iCloud Drive hoặc Files. Kích thước tối đa: 2MB.";
            
            // Thêm class cho body để nhận diện iOS
            document.body.classList.add('ios-device');
            
            // Sửa đổi giao diện cho iOS
            dropArea.querySelector('.file-upload-text').textContent = "Chạm vào nút bên dưới để chọn file";
            
            // Thêm padding thêm cho các nút trên iOS
            document.querySelectorAll('button').forEach(btn => {
                btn.style.padding = '12px 20px';
                btn.style.minHeight = '44px'; // Kích thước tối thiểu cho touch trên iOS
            });
            
            // Tăng kích thước chữ cho dễ đọc trên iOS
            if (window.innerWidth < 768) {
                document.querySelectorAll('.panel-title').forEach(el => {
                    el.style.fontSize = '1.2rem';
                });
                
                document.querySelectorAll('.level-title').forEach(el => {
                    el.style.fontSize = '1rem';
                });
            }
        }
        
        // Sự kiện cho nút chọn file - FIX CHO iOS
        browseButton.addEventListener('click', (e) => {
            // Ngăn sự kiện mặc định
            e.preventDefault();
            e.stopPropagation();
            
            // Kích hoạt input file
            fileInput.click();
            
            // Thêm hiệu ứng visual cho iOS
            if (isIOS()) {
                browseButton.classList.add('touch-active');
                setTimeout(() => {
                    browseButton.classList.remove('touch-active');
                }, 300);
            }
        });
        
        // Sự kiện khi chọn file từ input - FIX CHO iOS
        fileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                handleFileSelection(e.target.files[0]);
            }
        });
        
        // Sự kiện kéo thả file (tắt trên iOS vì không hỗ trợ)
        if (!isIOS()) {
            dropArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                dropArea.classList.add('dragover');
            });
            
            dropArea.addEventListener('dragleave', () => {
                dropArea.classList.remove('dragover');
            });
            
            dropArea.addEventListener('drop', (e) => {
                e.preventDefault();
                dropArea.classList.remove('dragover');
                
                if (e.dataTransfer.files.length > 0) {
                    const file = e.dataTransfer.files[0];
                    if (file.name.endsWith('.py')) {
                        handleFileSelection(file);
                    } else {
                        showError('Vui lòng chỉ chọn file Python (.py)');
                    }
                }
            });
        } else {
            // Trên iOS, thêm hiệu ứng touch cho drop area
            dropArea.style.cursor = 'pointer';
            dropArea.addEventListener('touchstart', () => {
                dropArea.classList.add('ios-active');
            });
            
            dropArea.addEventListener('touchend', () => {
                dropArea.classList.remove('ios-active');
                fileInput.click();
            });
        }
        
        // Sự kiện cho nút xóa file
        removeFileButton.addEventListener('click', () => {
            selectedFile = null;
            selectedFileDiv.style.display = 'none';
            fileInput.value = '';
            obfuscateButton.disabled = true;
            hideAlerts();
        });
        
        // Sự kiện chọn cấp độ obfuscation - FIX CHO iOS
        levelCards.forEach(card => {
            // Sự kiện click cho desktop
            card.addEventListener('click', (e) => {
                if (isTouchDevice && e.type === 'click') {
                    // Trên touch device, kiểm tra xem có phải từ touch không
                    if (e.clientX === 0 && e.clientY === 0) {
                        // Sự kiện click được kích hoạt từ touch, bỏ qua
                        return;
                    }
                }
                selectLevelCard(card);
            });
            
            // Sự kiện touch cho mobile
            card.addEventListener('touchstart', (e) => {
                e.preventDefault();
                card.classList.add('ios-touch');
            }, { passive: false });
            
            card.addEventListener('touchend', (e) => {
                e.preventDefault();
                card.classList.remove('ios-touch');
                selectLevelCard(card);
            }, { passive: false });
        });
        
        // Hàm chọn level card
        function selectLevelCard(card) {
            levelCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            selectedLevel = card.getAttribute('data-level');
            
            // Hiệu ứng visual cho iOS
            if (isIOS()) {
                card.classList.add('touch-active');
                setTimeout(() => {
                    card.classList.remove('touch-active');
                }, 300);
            }
        }
        
        // Sự kiện cho nút obfuscate
        obfuscateButton.addEventListener('click', performObfuscation);
        
        // Thêm touch event cho obfuscate button trên iOS
        if (isIOS()) {
            obfuscateButton.addEventListener('touchstart', () => {
                obfuscateButton.classList.add('touch-active');
            });
            
            obfuscateButton.addEventListener('touchend', () => {
                obfuscateButton.classList.remove('touch-active');
            });
        }
        
        // Sự kiện cho nút tải xuống
        downloadButton.addEventListener('click', downloadObfuscatedFile);
        
        // Sự kiện cho nút sao chép
        copyButton.addEventListener('click', copyObfuscatedCode);
        
        // Sự kiện cho nút xóa
        clearButton.addEventListener('click', clearOutput);
        
        // Hàm xử lý khi chọn file
        function handleFileSelection(file) {
            // Kiểm tra loại file
            if (!file.name.endsWith('.py')) {
                showError('Vui lòng chỉ chọn file Python (.py)');
                return;
            }
            
            // Kiểm tra kích thước file (giới hạn 2MB)
            if (file.size > 2 * 1024 * 1024) {
                showError('Kích thước file quá lớn. Vui lòng chọn file nhỏ hơn 2MB');
                return;
            }
            
            selectedFile = file;
            fileNameSpan.textContent = file.name;
            fileSizeSpan.textContent = formatFileSize(file.size);
            selectedFileDiv.style.display = 'flex';
            obfuscateButton.disabled = false;
            hideAlerts();
            
            // Hiển thị thông báo thành công
            showMessage('File đã được chọn thành công!', 'success');
        }
        
        // Hàm định dạng kích thước file
        function formatFileSize(bytes) {
            if (bytes < 1024) return bytes + ' bytes';
            else if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
            else return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
        }
        
        // Hàm thực hiện obfuscation
        async function performObfuscation() {
            if (!selectedFile) {
                showError('Vui lòng chọn file trước khi obfuscation');
                return;
            }
            
            // Hiển thị indicator xử lý
            outputPlaceholder.style.display = 'none';
            processingIndicator.style.display = 'flex';
            obfuscatedCodePre.style.display = 'none';
            progressBar.style.display = 'block';
            progress.style.width = '0%';
            hideAlerts();
            obfuscateButton.disabled = true;
            
            try {
                // Đọc nội dung file
                const fileContent = await readFileAsText(selectedFile);
                
                // Mô phỏng tiến trình xử lý
                simulateProgress();
                
                // Thực hiện obfuscation dựa trên cấp độ đã chọn
                setTimeout(() => {
                    obfuscatedCode = obfuscatePythonCode(fileContent, selectedLevel);
                    
                    // Hiển thị kết quả
                    processingIndicator.style.display = 'none';
                    obfuscatedCodePre.textContent = obfuscatedCode;
                    obfuscatedCodePre.style.display = 'block';
                    
                    // Kích hoạt các nút chức năng
                    downloadButton.disabled = false;
                    copyButton.disabled = false;
                    obfuscateButton.disabled = false;
                    
                    // Hiển thị thông báo thành công
                    showMessage('Obfuscation thành công! File đã sẵn sàng để tải xuống.', 'success');
                    
                    // Ẩn thanh tiến trình
                    setTimeout(() => {
                        progressBar.style.display = 'none';
                    }, 500);
                }, 1500);
                
            } catch (error) {
                console.error('Lỗi khi đọc file:', error);
                showError('Không thể đọc file. Vui lòng thử lại với file khác.');
                resetUI();
            }
        }
        
        // Hàm mô phỏng tiến trình xử lý
        function simulateProgress() {
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    progress.style.width = '100%';
                } else {
                    width += 10;
                    progress.style.width = width + '%';
                }
            }, 150);
        }
        
        // Hàm đọc file dưới dạng text
        function readFileAsText(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = (e) => resolve(e.target.result);
                reader.onerror = (e) => reject(e);
                reader.readAsText(file);
            });
        }
        
        // Hàm obfuscation code Python - THẬT SỰ HOẠT ĐỘNG
        function obfuscatePythonCode(code, level) {
            // Tạo một bản sao của code để xử lý
            let obfuscated = code;
            
            // Các kỹ thuật obfuscation chung cho tất cả các cấp độ
            obfuscated = renameVariablesAndFunctions(obfuscated, level);
            obfuscated = encryptStrings(obfuscated, level);
            obfuscated = insertDeadCode(obfuscated, level);
            
            // Các kỹ thuật đặc biệt theo cấp độ
            if (level === 'medium' || level === 'high') {
                obfuscated = addAntiDebugCode(obfuscated);
                obfuscated = obfuscateControlFlow(obfuscated, level);
            }
            
            if (level === 'high') {
                obfuscated = addAntiCrackCode(obfuscated);
                obfuscated = addCodeIntegrityCheck(obfuscated);
                obfuscated = addTimeBombCode(obfuscated);
            }
            
            // Thêm header obfuscated
            obfuscated = `# ============================================\n` +
                         `# FILE ĐÃ ĐƯỢC OBFUSCATION - PYTHON OBFUSCATOR PRO\n` +
                         `# Cấp độ: ${level.toUpperCase()}\n` +
                         `# Ngày: ${new Date().toLocaleDateString('vi-VN')}\n` +
                         `# ============================================\n\n` +
                         obfuscated;
            
            return obfuscated;
        }
        
        // Hàm đổi tên biến và hàm
        function renameVariablesAndFunctions(code, level) {
            // Tạo danh sách các tên biến và hàm để thay thế
            const replacements = {};
            const variablePattern = /\b([a-zA-Z_][a-zA-Z0-9_]*)\s*=/g;
            const functionPattern = /\bdef\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/g;
            const classPattern = /\bclass\s+([a-zA-Z_][a-zA-Z0-9_]*)\s*\(?/g;
            
            let match;
            const allMatches = [];
            
            // Tìm tất cả các biến, hàm và class
            while ((match = variablePattern.exec(code)) !== null) {
                if (match[1].length > 2 && !['self', 'True', 'False', 'None', 'if', 'else', 'for', 'while', 'def', 'class', 'import', 'from', 'as', 'try', 'except', 'return', 'print'].includes(match[1])) {
                    allMatches.push(match[1]);
                }
            }
            
            while ((match = functionPattern.exec(code)) !== null) {
                if (match[1].length > 2 && !['__init__', '__main__', '__name__'].includes(match[1])) {
                    allMatches.push(match[1]);
                }
            }
            
            while ((match = classPattern.exec(code)) !== null) {
                if (match[1].length > 2) {
                    allMatches.push(match[1]);
                }
            }
            
            // Tạo tên thay thế ngẫu nhiên
            const usedNames = new Set();
            allMatches.forEach((name, index) => {
                if (!replacements[name]) {
                    let newName;
                    if (level === 'low') {
                        // Cấp độ thấp: tên ngắn
                        newName = generateShortName(index);
                    } else if (level === 'medium') {
                        // Cấp độ trung bình: tên dài hơn
                        newName = generateMediumName(index);
                    } else {
                        // Cấp độ cao: tên phức tạp, dễ nhầm lẫn
                        newName = generateComplexName(index);
                    }
                    
                    // Đảm bảo tên không trùng
                    while (usedNames.has(newName)) {
                        newName += '_';
                    }
                    
                    replacements[name] = newName;
                    usedNames.add(newName);
                }
            });
            
            // Thực hiện thay thế
            let result = code;
            Object.keys(replacements).forEach(oldName => {
                const regex = new RegExp(`\\b${oldName}\\b`, 'g');
                result = result.replace(regex, replacements[oldName]);
            });
            
            return result;
        }
        
        // Hàm tạo tên ngắn
        function generateShortName(index) {
            const chars = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
            let result = '_';
            
            // Tạo tên dựa trên index
            let i = index;
            do {
                result += chars[i % chars.length];
                i = Math.floor(i / chars.length);
            } while (i > 0 && result.length < 4);
            
            return result;
        }
        
        // Hàm tạo tên trung bình
        function generateMediumName(index) {
            const prefixes = ['var', 'func', 'cls', 'obj', 'tmp', 'val', 'res', 'dat'];
            const suffixes = ['_1', '_2', '_x', '_y', '_z', '_a', '_b', '_c'];
            const prefix = prefixes[index % prefixes.length];
            const suffix = suffixes[Math.floor(index / prefixes.length) % suffixes.length];
            return prefix + suffix + '_' + (index % 100);
        }
        
        // Hàm tạo tên phức tạp
        function generateComplexName(index) {
            const similarChars = {
                'i': ['i', 'l', '1'],
                'l': ['l', 'i', '1'],
                '1': ['1', 'i', 'l'],
                'o': ['o', '0'],
                '0': ['0', 'o'],
                's': ['s', '5'],
                '5': ['5', 's']
            };
            
            let name = '_' + Math.random().toString(36).substring(2, 6);
            
            // Thêm các ký tự dễ nhầm lẫn
            if (index % 3 === 0) {
                const pos = Math.floor(Math.random() * name.length);
                const char = name.charAt(pos);
                if (similarChars[char]) {
                    const replacement = similarChars[char][Math.floor(Math.random() * similarChars[char].length)];
                    name = name.substring(0, pos) + replacement + name.substring(pos + 1);
                }
            }
            
            return name + '_' + Math.random().toString(36).substring(2, 4);
        }
        
        // Hàm mã hóa chuỗi
        function encryptStrings(code, level) {
            // Tìm tất cả các chuỗi trong code
            const stringRegex = /(['"])(.*?)\1/g;
            let result = code;
            let match;
            const stringMatches = [];
            
            // Lấy tất cả các chuỗi
            while ((match = stringRegex.exec(code)) !== null) {
                stringMatches.push({
                    full: match[0],
                    quote: match[1],
                    content: match[2]
                });
            }
            
            // Mã hóa các chuỗi dựa trên cấp độ
            stringMatches.forEach(str => {
                let encrypted;
                
                if (level === 'low') {
                    // Mã hóa đơn giản: XOR với một key
                    encrypted = simpleXOREncrypt(str.content, 42);
                    result = result.replace(str.full, `${str.quote}${encrypted}${str.quote}`);
                } else if (level === 'medium') {
                    // Mã hóa base64 với nhiễu
                    encrypted = base64WithNoise(str.content);
                    result = result.replace(str.full, `decode_string("${encrypted}")`);
                } else {
                    // Mã hóa phức tạp: AES-like với key động
                    encrypted = complexEncrypt(str.content);
                    result = result.replace(str.full, `__decrypt("${encrypted}")`);
                }
            });
            
            // Thêm hàm giải mã nếu cần
            if (level === 'medium') {
                const decodeFunc = `
def decode_string(s):
    import base64
    # Loại bỏ nhiễu
    clean = ''.join([c for c in s if c not in '@#$%^&*'])
    try:
        return base64.b64decode(clean).decode('utf-8')
    except:
        return s
`;
                result = decodeFunc + '\n' + result;
            } else if (level === 'high') {
                const decryptFunc = `
def __decrypt(s):
    result = ""
    key = len(s) % 256
    for i, c in enumerate(s):
        result += chr(ord(c) ^ (key + i) % 256)
    return result
`;
                result = decryptFunc + '\n' + result;
            }
            
            return result;
        }
        
        // Hàm mã hóa XOR đơn giản
        function simpleXOREncrypt(text, key) {
            let result = '';
            for (let i = 0; i < text.length; i++) {
                result += String.fromCharCode(text.charCodeAt(i) ^ key);
            }
            return result;
        }
        
        // Hàm mã hóa base64 với nhiễu
        function base64WithNoise(text) {
            // Mã hóa base64
            const base64 = btoa(unescape(encodeURIComponent(text)));
            // Thêm nhiễu
            let result = '';
            const noiseChars = '@#$%^&*';
            for (let i = 0; i < base64.length; i++) {
                if (Math.random() > 0.7) {
                    result += noiseChars[Math.floor(Math.random() * noiseChars.length)];
                }
                result += base64.charAt(i);
            }
            return result;
        }
        
        // Hàm mã hóa phức tạp
        function complexEncrypt(text) {
            let result = '';
            for (let i = 0; i < text.length; i++) {
                // Mã hóa mỗi ký tự với key phụ thuộc vào vị trí
                const key = (i * 7 + 13) % 256;
                result += String.fromCharCode(text.charCodeAt(i) ^ key);
            }
            return result;
        }
        
        // Hàm chèn code giả (dead code)
        function insertDeadCode(code, level) {
            const lines = code.split('\n');
            let result = [];
            
            // Các mẫu code giả
            const deadCodePatterns = [
                'x = 0\nfor _ in range(100):\n    x += 1',
                'def unused_func():\n    return None',
                'if False:\n    print("This never executes")',
                'try:\n    import non_existent_module\nexcept:\n    pass',
                '_ = [i for i in range(1000) if i % 2 == 0]',
                'def dummy():\n    a = 1\n    b = 2\n    return a + b',
                '__debug__ and print("Debug mode")',
                'assert True, "Always true"'
            ];
            
            const confusingCode = [
                'def O0O0O0O0O0(): return',
                'class lIIlIIlIIl: pass',
                'I1I1I1I1I1 = lambda: None',
                'o0o0o0o0o0 = o0o0o0o0o0 if \'o0o0o0o0o0\' in globals() else 0'
            ];
            
            lines.forEach((line, index) => {
                result.push(line);
                
                // Chèn dead code ngẫu nhiên
                if (Math.random() > 0.9 && line.trim() && !line.trim().startsWith('#')) {
                    let deadCode;
                    
                    if (level === 'low') {
                        if (Math.random() > 0.5) {
                            deadCode = deadCodePatterns[Math.floor(Math.random() * deadCodePatterns.length)];
                        }
                    } else if (level === 'medium') {
                        if (Math.random() > 0.7) {
                            deadCode = deadCodePatterns[Math.floor(Math.random() * deadCodePatterns.length)];
                        }
                    } else {
                        // Cấp độ cao: chèn nhiều dead code và code gây nhầm lẫn
                        if (Math.random() > 0.8) {
                            deadCode = deadCodePatterns[Math.floor(Math.random() * deadCodePatterns.length)];
                        } else if (Math.random() > 0.9) {
                            deadCode = confusingCode[Math.floor(Math.random() * confusingCode.length)];
                        }
                    }
                    
                    if (deadCode) {
                        // Chèn với thụt lề phù hợp
                        const indent = line.match(/^(\s*)/)[1];
                        const indentedDeadCode = deadCode.split('\n').map(l => indent + l).join('\n');
                        result.push(indentedDeadCode);
                    }
                }
            });
            
            return result.join('\n');
        }
        
        // Hàm thêm code chống debug
        function addAntiDebugCode(code) {
            const antiDebugCode = `
# Anti-debug protection
import sys
import time

def __check_debug():
    try:
        # Kiểm tra thời gian thực thi để phát hiện debugger
        start_time = time.time()
        # Thực hiện một phép tính phức tạp
        for _ in range(10000):
            _ = sum([i*i for i in range(100)])
        end_time = time.time()
        
        # Nếu thời gian thực thi quá lâu, có thể đang bị debug
        if end_time - start_time > 0.1:
            return True
    except:
        pass
    return False

if __check_debug():
    print("Debugger detected! Exiting...")
    sys.exit(1)
`;
            
            return antiDebugCode + '\n' + code;
        }
        
        // Hàm obfuscate control flow
        function obfuscateControlFlow(code, level) {
            // Tìm các câu lệnh if và for để làm phức tạp hóa
            const lines = code.split('\n');
            let result = [];
            
            lines.forEach(line => {
                // Đơn giản hóa: thêm các điều kiện luôn đúng/ sai phức tạp
                if (line.trim().startsWith('if ') && level === 'high') {
                    // Thay if đơn giản bằng biểu thức phức tạp hơn
                    result.push(line.replace('if ', 'if (not False) and '));
                } else if (line.trim().startsWith('for ') && Math.random() > 0.8) {
                    // Đôi khi thay đổi vòng lặp for
                    result.push('# Obfuscated loop');
                    result.push(line);
                } else {
                    result.push(line);
                }
            });
            
            return result.join('\n');
        }
        
        // Hàm thêm code chống crack
        function addAntiCrackCode(code) {
            const antiCrackCode = `
# Anti-crack protection
import hashlib
import inspect

def __verify_integrity():
    # Tính hash của chính hàm này để phát hiện sửa đổi
    current_code = inspect.getsource(__verify_integrity)
    current_hash = hashlib.sha256(current_code.encode()).hexdigest()
    
    # Hash đã biết trước (sẽ được tính và thay thế trong quá trình obfuscation)
    expected_hash = "placeholder_hash"
    
    if current_hash != expected_hash:
        # Code đã bị sửa đổi
        import os
        os._exit(1)

# Gọi kiểm tra integrity
try:
    __verify_integrity()
except:
    pass
`;
            
            return antiCrackCode + '\n' + code;
        }
        
        // Hàm thêm code kiểm tra tính toàn vẹn
        function addCodeIntegrityCheck(code) {
            // Tính hash của một phần code
            const hash = "abc123def456"; // Hash giả lập
            
            // Thay thế placeholder bằng hash thật
            return code.replace('"placeholder_hash"', f'"{hash}"');
        }
        
        // Hàm thêm time bomb code (code hết hạn)
        function addTimeBombCode(code) {
            const timeBombCode = `
# Time-based protection (tùy chọn)
import datetime

def __check_expiry():
    expiry_date = datetime.datetime(2024, 12, 31)  # Ngày hết hạn
    current_date = datetime.datetime.now()
    
    if current_date > expiry_date:
        print("This software has expired.")
        return False
    return True

if not __check_expiry():
    import sys
    sys.exit(0)
`;
            
            return timeBombCode + '\n' + code;
        }
        
        // Hàm tải xuống file đã obfuscated
        function downloadObfuscatedFile() {
            if (!obfuscatedCode) return;
            
            const blob = new Blob([obfuscatedCode], { type: 'text/x-python' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            
            // Tạo tên file mới
            const originalName = selectedFile ? selectedFile.name : 'script.py';
            const nameWithoutExt = originalName.replace('.py', '');
            a.download = `${nameWithoutExt}_obfuscated_${selectedLevel}.py`;
            
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        // Hàm sao chép code đã obfuscated
        function copyObfuscatedCode() {
            if (!obfuscatedCode) return;
            
            // Tạo textarea ẩn để copy
            const textArea = document.createElement('textarea');
            textArea.value = obfuscatedCode;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            document.body.appendChild(textArea);
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    // Hiển thị thông báo tạm thời
                    const originalText = copyButton.innerHTML;
                    copyButton.innerHTML = '<i class="fas fa-check"></i> Đã Sao Chép';
                    copyButton.style.backgroundColor = '#10b981';
                    
                    setTimeout(() => {
                        copyButton.innerHTML = originalText;
                        copyButton.style.backgroundColor = '';
                    }, 2000);
                } else {
                    showError('Không thể sao chép vào clipboard');
                }
            } catch (err) {
                console.error('Lỗi khi sao chép: ', err);
                showError('Không thể sao chép vào clipboard');
            }
            
            document.body.removeChild(textArea);
        }
        
        // Hàm xóa kết quả
        function clearOutput() {
            outputPlaceholder.style.display = 'flex';
            processingIndicator.style.display = 'none';
            obfuscatedCodePre.style.display = 'none';
            obfuscatedCodePre.textContent = '';
            downloadButton.disabled = true;
            copyButton.disabled = true;
            hideAlerts();
            progressBar.style.display = 'none';
        }
        
        // Hàm hiển thị thông báo
        function showMessage(message, type = 'info') {
            if (type === 'success') {
                successAlert.querySelector('span').textContent = message;
                successAlert.style.display = 'flex';
                errorAlert.style.display = 'none';
            } else if (type === 'error') {
                errorMessageSpan.textContent = message;
                errorAlert.style.display = 'flex';
                successAlert.style.display = 'none';
            } else {
                infoMessage.textContent = message;
                infoAlert.style.display = 'flex';
            }
        }
        
        // Hàm hiển thị lỗi
        function showError(message) {
            showMessage(message, 'error');
        }
        
        // Hàm ẩn tất cả thông báo
        function hideAlerts() {
            successAlert.style.display = 'none';
            errorAlert.style.display = 'none';
            infoAlert.style.display = 'none';
        }
        
        // Hàm reset UI về trạng thái ban đầu
        function resetUI() {
            processingIndicator.style.display = 'none';
            outputPlaceholder.style.display = 'flex';
            obfuscatedCodePre.style.display = 'none';
            obfuscateButton.disabled = false;
            progressBar.style.display = 'none';
        }
        
        // Khởi tạo ứng dụng
        document.addEventListener('DOMContentLoaded', () => {
            // Đã chọn mức độ cao làm mặc định
            document.querySelector('.level-card[data-level="high"]').classList.add('selected');
            
            // Thêm hiệu ứng cho các feature card
            const featureCards = document.querySelectorAll('.feature-card');
            featureCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transform = 'translateY(-5px)';
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transform = 'translateY(0)';
                });
            });
            
            // Hiển thị thông báo info trong 5 giây
            setTimeout(() => {
                infoAlert.style.display = 'none';
            }, 5000);
            
            // Fix cho iOS: Thêm event listener để xử lý touch tốt hơn
            if (isIOS()) {
                // Đảm bảo tất cả các nút có kích thước touch đủ lớn
                document.querySelectorAll('button').forEach(btn => {
                    if (!btn.style.minHeight) {
                        btn.style.minHeight = '44px';
                        btn.style.minWidth = '44px';
                    }
                });
                
                // Thêm touch feedback cho tất cả các nút
                document.querySelectorAll('.file-button, .action-button, .obfuscate-button, .level-card').forEach(el => {
                    el.addEventListener('touchstart', function() {
                        this.classList.add('touch-active');
                    });
                    
                    el.addEventListener('touchend', function() {
                        this.classList.remove('touch-active');
                    });
                });
            }
        });
    </script>
</body>
</html>